{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar http_1 = require(\"@angular/http\");\nvar core_1 = require(\"@angular/core\");\nvar Observable_1 = require(\"rxjs/Observable\");\nrequire(\"rxjs/add/observable/fromPromise\");\nrequire(\"rxjs/add/observable/defer\");\nrequire(\"rxjs/add/operator/mergeMap\");\nvar AuthConfigConsts = function () {\n  function AuthConfigConsts() {}\n  return AuthConfigConsts;\n}();\nAuthConfigConsts.DEFAULT_TOKEN_NAME = 'token';\nAuthConfigConsts.DEFAULT_HEADER_NAME = 'Authorization';\nAuthConfigConsts.HEADER_PREFIX_BEARER = 'Bearer ';\nexports.AuthConfigConsts = AuthConfigConsts;\nvar AuthConfigDefaults = {\n  headerName: AuthConfigConsts.DEFAULT_HEADER_NAME,\n  headerPrefix: null,\n  tokenName: AuthConfigConsts.DEFAULT_TOKEN_NAME,\n  tokenGetter: function () {\n    return localStorage.getItem(AuthConfigDefaults.tokenName);\n  },\n  noJwtError: false,\n  noClientCheck: false,\n  globalHeaders: [],\n  noTokenScheme: false\n};\n/**\n * Sets up the authentication configuration.\n */\nvar AuthConfig = function () {\n  function AuthConfig(config) {\n    config = config || {};\n    this._config = objectAssign({}, AuthConfigDefaults, config);\n    if (this._config.headerPrefix) {\n      this._config.headerPrefix += ' ';\n    } else if (this._config.noTokenScheme) {\n      this._config.headerPrefix = '';\n    } else {\n      this._config.headerPrefix = AuthConfigConsts.HEADER_PREFIX_BEARER;\n    }\n    if (config.tokenName && !config.tokenGetter) {\n      this._config.tokenGetter = function () {\n        return localStorage.getItem(config.tokenName);\n      };\n    }\n  }\n  AuthConfig.prototype.getConfig = function () {\n    return this._config;\n  };\n  return AuthConfig;\n}();\nexports.AuthConfig = AuthConfig;\nvar AuthHttpError = function (_super) {\n  __extends(AuthHttpError, _super);\n  function AuthHttpError() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return AuthHttpError;\n}(Error);\nexports.AuthHttpError = AuthHttpError;\n/**\n * Allows for explicit authenticated HTTP requests.\n */\nvar AuthHttp = function () {\n  function AuthHttp(options, http, defOpts) {\n    var _this = this;\n    this.http = http;\n    this.defOpts = defOpts;\n    this.config = options.getConfig();\n    this.tokenStream = new Observable_1.Observable(function (obs) {\n      obs.next(_this.config.tokenGetter());\n    });\n  }\n  AuthHttp.prototype.mergeOptions = function (providedOpts, defaultOpts) {\n    var newOptions = defaultOpts || new http_1.RequestOptions();\n    if (this.config.globalHeaders) {\n      this.setGlobalHeaders(this.config.globalHeaders, providedOpts);\n    }\n    newOptions = newOptions.merge(new http_1.RequestOptions(providedOpts));\n    return newOptions;\n  };\n  AuthHttp.prototype.requestHelper = function (requestArgs, additionalOptions) {\n    var options = new http_1.RequestOptions(requestArgs);\n    if (additionalOptions) {\n      options = options.merge(additionalOptions);\n    }\n    return this.request(new http_1.Request(this.mergeOptions(options, this.defOpts)));\n  };\n  AuthHttp.prototype.requestWithToken = function (req, token) {\n    if (!this.config.noClientCheck && !tokenNotExpired(undefined, token)) {\n      if (!this.config.noJwtError) {\n        return new Observable_1.Observable(function (obs) {\n          obs.error(new AuthHttpError('No JWT present or has expired'));\n        });\n      }\n    } else {\n      req.headers.set(this.config.headerName, this.config.headerPrefix + token);\n    }\n    return this.http.request(req);\n  };\n  AuthHttp.prototype.setGlobalHeaders = function (headers, request) {\n    if (!request.headers) {\n      request.headers = new http_1.Headers();\n    }\n    headers.forEach(function (header) {\n      var key = Object.keys(header)[0];\n      var headerValue = header[key];\n      request.headers.set(key, headerValue);\n    });\n  };\n  AuthHttp.prototype.request = function (url, options) {\n    var _this = this;\n    if (typeof url === 'string') {\n      return this.get(url, options); // Recursion: transform url from String to Request\n    }\n    // else if ( ! url instanceof Request ) {\n    //   throw new Error('First argument must be a url string or Request instance.');\n    // }\n    // from this point url is always an instance of Request;\n    var req = url;\n    // Create a cold observable and load the token just in time\n    return Observable_1.Observable.defer(function () {\n      var token = _this.config.tokenGetter();\n      if (token instanceof Promise) {\n        return Observable_1.Observable.fromPromise(token).mergeMap(function (jwtToken) {\n          return _this.requestWithToken(req, jwtToken);\n        });\n      } else {\n        return _this.requestWithToken(req, token);\n      }\n    });\n  };\n  AuthHttp.prototype.get = function (url, options) {\n    return this.requestHelper({\n      body: '',\n      method: http_1.RequestMethod.Get,\n      url: url\n    }, options);\n  };\n  AuthHttp.prototype.post = function (url, body, options) {\n    return this.requestHelper({\n      body: body,\n      method: http_1.RequestMethod.Post,\n      url: url\n    }, options);\n  };\n  AuthHttp.prototype.put = function (url, body, options) {\n    return this.requestHelper({\n      body: body,\n      method: http_1.RequestMethod.Put,\n      url: url\n    }, options);\n  };\n  AuthHttp.prototype.delete = function (url, options) {\n    return this.requestHelper({\n      body: '',\n      method: http_1.RequestMethod.Delete,\n      url: url\n    }, options);\n  };\n  AuthHttp.prototype.patch = function (url, body, options) {\n    return this.requestHelper({\n      body: body,\n      method: http_1.RequestMethod.Patch,\n      url: url\n    }, options);\n  };\n  AuthHttp.prototype.head = function (url, options) {\n    return this.requestHelper({\n      body: '',\n      method: http_1.RequestMethod.Head,\n      url: url\n    }, options);\n  };\n  AuthHttp.prototype.options = function (url, options) {\n    return this.requestHelper({\n      body: '',\n      method: http_1.RequestMethod.Options,\n      url: url\n    }, options);\n  };\n  return AuthHttp;\n}();\nAuthHttp = __decorate([core_1.Injectable(), __metadata(\"design:paramtypes\", [AuthConfig, http_1.Http, http_1.RequestOptions])], AuthHttp);\nexports.AuthHttp = AuthHttp;\n/**\n * Helper class to decode and find JWT expiration.\n */\nvar JwtHelper = function () {\n  function JwtHelper() {}\n  JwtHelper.prototype.urlBase64Decode = function (str) {\n    var output = str.replace(/-/g, '+').replace(/_/g, '/');\n    switch (output.length % 4) {\n      case 0:\n        {\n          break;\n        }\n      case 2:\n        {\n          output += '==';\n          break;\n        }\n      case 3:\n        {\n          output += '=';\n          break;\n        }\n      default:\n        {\n          throw 'Illegal base64url string!';\n        }\n    }\n    return this.b64DecodeUnicode(output);\n  };\n  // credits for decoder goes to https://github.com/atk\n  JwtHelper.prototype.b64decode = function (str) {\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var output = '';\n    str = String(str).replace(/=+$/, '');\n    if (str.length % 4 == 1) {\n      throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n    }\n    for (\n    // initialize result and counters\n    var bc = 0, bs = void 0, buffer = void 0, idx = 0;\n    // get next character\n    buffer = str.charAt(idx++);\n    // character found in table? initialize bit storage and add its ascii value;\n    ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n    // and if not first of each 4 characters,\n    // convert the first 8 bits to one ascii character\n    bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0) {\n      // try to find character in table (0-63, not found => -1)\n      buffer = chars.indexOf(buffer);\n    }\n    return output;\n  };\n  // https://developer.mozilla.org/en/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\n  JwtHelper.prototype.b64DecodeUnicode = function (str) {\n    return decodeURIComponent(Array.prototype.map.call(this.b64decode(str), function (c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n  };\n  JwtHelper.prototype.decodeToken = function (token) {\n    var parts = token.split('.');\n    if (parts.length !== 3) {\n      throw new Error('JWT must have 3 parts');\n    }\n    var decoded = this.urlBase64Decode(parts[1]);\n    if (!decoded) {\n      throw new Error('Cannot decode the token');\n    }\n    return JSON.parse(decoded);\n  };\n  JwtHelper.prototype.getTokenExpirationDate = function (token) {\n    var decoded;\n    decoded = this.decodeToken(token);\n    if (!decoded.hasOwnProperty('exp')) {\n      return null;\n    }\n    var date = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    date.setUTCSeconds(decoded.exp);\n    return date;\n  };\n  JwtHelper.prototype.isTokenExpired = function (token, offsetSeconds) {\n    var date = this.getTokenExpirationDate(token);\n    offsetSeconds = offsetSeconds || 0;\n    if (date == null) {\n      return false;\n    }\n    // Token expired?\n    return !(date.valueOf() > new Date().valueOf() + offsetSeconds * 1000);\n  };\n  return JwtHelper;\n}();\nexports.JwtHelper = JwtHelper;\n/**\n * Checks for presence of token and that token hasn't expired.\n * For use with the @CanActivate router decorator and NgIf\n */\nfunction tokenNotExpired(tokenName, jwt) {\n  if (tokenName === void 0) {\n    tokenName = AuthConfigConsts.DEFAULT_TOKEN_NAME;\n  }\n  var token = jwt || localStorage.getItem(tokenName);\n  var jwtHelper = new JwtHelper();\n  return token != null && !jwtHelper.isTokenExpired(token);\n}\nexports.tokenNotExpired = tokenNotExpired;\nexports.AUTH_PROVIDERS = [{\n  provide: AuthHttp,\n  deps: [http_1.Http, http_1.RequestOptions],\n  useFactory: function (http, options) {\n    return new AuthHttp(new AuthConfig(), http, options);\n  }\n}];\nfunction provideAuth(config) {\n  return [{\n    provide: AuthHttp,\n    deps: [http_1.Http, http_1.RequestOptions],\n    useFactory: function (http, options) {\n      return new AuthHttp(new AuthConfig(config), http, options);\n    }\n  }];\n}\nexports.provideAuth = provideAuth;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined');\n  }\n  return Object(val);\n}\nfunction objectAssign(target) {\n  var source = [];\n  for (var _i = 1; _i < arguments.length; _i++) {\n    source[_i - 1] = arguments[_i];\n  }\n  var from;\n  var to = toObject(target);\n  var symbols;\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n    if (Object.getOwnPropertySymbols) {\n      symbols = Object.getOwnPropertySymbols(from);\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]];\n        }\n      }\n    }\n  }\n  return to;\n}\n/**\n * Module for angular2-jwt\n * @experimental\n */\nvar AuthModule = AuthModule_1 = function () {\n  function AuthModule(parentModule) {\n    if (parentModule) {\n      throw new Error('AuthModule is already loaded. Import it in the AppModule only');\n    }\n  }\n  AuthModule.forRoot = function (config) {\n    return {\n      ngModule: AuthModule_1,\n      providers: [{\n        provide: AuthConfig,\n        useValue: config\n      }]\n    };\n  };\n  return AuthModule;\n}();\nAuthModule = AuthModule_1 = __decorate([core_1.NgModule({\n  imports: [http_1.HttpModule],\n  providers: [AuthHttp, JwtHelper]\n}), __param(0, core_1.Optional()), __param(0, core_1.SkipSelf()), __metadata(\"design:paramtypes\", [AuthModule])], AuthModule);\nexports.AuthModule = AuthModule;\nvar AuthModule_1;","map":{"version":3,"names":["__extends","d","b","p","hasOwnProperty","__","constructor","prototype","Object","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","__param","paramIndex","decorator","http_1","require","core_1","Observable_1","AuthConfigConsts","DEFAULT_TOKEN_NAME","DEFAULT_HEADER_NAME","HEADER_PREFIX_BEARER","exports","AuthConfigDefaults","headerName","headerPrefix","tokenName","tokenGetter","localStorage","getItem","noJwtError","noClientCheck","globalHeaders","noTokenScheme","AuthConfig","config","_config","objectAssign","getConfig","AuthHttpError","_super","apply","Error","AuthHttp","options","http","defOpts","_this","tokenStream","Observable","obs","next","mergeOptions","providedOpts","defaultOpts","newOptions","RequestOptions","setGlobalHeaders","merge","requestHelper","requestArgs","additionalOptions","request","Request","requestWithToken","req","token","tokenNotExpired","undefined","error","headers","set","Headers","forEach","header","keys","headerValue","url","get","defer","Promise","fromPromise","mergeMap","jwtToken","body","method","RequestMethod","Get","post","Post","put","Put","delete","Delete","patch","Patch","head","Head","Options","Injectable","Http","JwtHelper","urlBase64Decode","str","output","replace","b64DecodeUnicode","b64decode","chars","String","bc","bs","buffer","idx","charAt","fromCharCode","indexOf","decodeURIComponent","Array","map","call","charCodeAt","toString","slice","join","decodeToken","parts","split","decoded","JSON","parse","getTokenExpirationDate","date","Date","setUTCSeconds","exp","isTokenExpired","offsetSeconds","valueOf","jwt","jwtHelper","AUTH_PROVIDERS","provide","deps","useFactory","provideAuth","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","source","_i","from","to","symbols","s","getOwnPropertySymbols","AuthModule","AuthModule_1","parentModule","forRoot","ngModule","providers","useValue","NgModule","imports","HttpModule","Optional","SkipSelf"],"sources":["C:/Users/Montg/Documents/Final Year/APDS/POE/POE/node_modules/angular2-jwt/angular2-jwt.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar http_1 = require(\"@angular/http\");\nvar core_1 = require(\"@angular/core\");\nvar Observable_1 = require(\"rxjs/Observable\");\nrequire(\"rxjs/add/observable/fromPromise\");\nrequire(\"rxjs/add/observable/defer\");\nrequire(\"rxjs/add/operator/mergeMap\");\nvar AuthConfigConsts = (function () {\n    function AuthConfigConsts() {\n    }\n    return AuthConfigConsts;\n}());\nAuthConfigConsts.DEFAULT_TOKEN_NAME = 'token';\nAuthConfigConsts.DEFAULT_HEADER_NAME = 'Authorization';\nAuthConfigConsts.HEADER_PREFIX_BEARER = 'Bearer ';\nexports.AuthConfigConsts = AuthConfigConsts;\nvar AuthConfigDefaults = {\n    headerName: AuthConfigConsts.DEFAULT_HEADER_NAME,\n    headerPrefix: null,\n    tokenName: AuthConfigConsts.DEFAULT_TOKEN_NAME,\n    tokenGetter: function () { return localStorage.getItem(AuthConfigDefaults.tokenName); },\n    noJwtError: false,\n    noClientCheck: false,\n    globalHeaders: [],\n    noTokenScheme: false\n};\n/**\n * Sets up the authentication configuration.\n */\nvar AuthConfig = (function () {\n    function AuthConfig(config) {\n        config = config || {};\n        this._config = objectAssign({}, AuthConfigDefaults, config);\n        if (this._config.headerPrefix) {\n            this._config.headerPrefix += ' ';\n        }\n        else if (this._config.noTokenScheme) {\n            this._config.headerPrefix = '';\n        }\n        else {\n            this._config.headerPrefix = AuthConfigConsts.HEADER_PREFIX_BEARER;\n        }\n        if (config.tokenName && !config.tokenGetter) {\n            this._config.tokenGetter = function () { return localStorage.getItem(config.tokenName); };\n        }\n    }\n    AuthConfig.prototype.getConfig = function () {\n        return this._config;\n    };\n    return AuthConfig;\n}());\nexports.AuthConfig = AuthConfig;\nvar AuthHttpError = (function (_super) {\n    __extends(AuthHttpError, _super);\n    function AuthHttpError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return AuthHttpError;\n}(Error));\nexports.AuthHttpError = AuthHttpError;\n/**\n * Allows for explicit authenticated HTTP requests.\n */\nvar AuthHttp = (function () {\n    function AuthHttp(options, http, defOpts) {\n        var _this = this;\n        this.http = http;\n        this.defOpts = defOpts;\n        this.config = options.getConfig();\n        this.tokenStream = new Observable_1.Observable(function (obs) {\n            obs.next(_this.config.tokenGetter());\n        });\n    }\n    AuthHttp.prototype.mergeOptions = function (providedOpts, defaultOpts) {\n        var newOptions = defaultOpts || new http_1.RequestOptions();\n        if (this.config.globalHeaders) {\n            this.setGlobalHeaders(this.config.globalHeaders, providedOpts);\n        }\n        newOptions = newOptions.merge(new http_1.RequestOptions(providedOpts));\n        return newOptions;\n    };\n    AuthHttp.prototype.requestHelper = function (requestArgs, additionalOptions) {\n        var options = new http_1.RequestOptions(requestArgs);\n        if (additionalOptions) {\n            options = options.merge(additionalOptions);\n        }\n        return this.request(new http_1.Request(this.mergeOptions(options, this.defOpts)));\n    };\n    AuthHttp.prototype.requestWithToken = function (req, token) {\n        if (!this.config.noClientCheck && !tokenNotExpired(undefined, token)) {\n            if (!this.config.noJwtError) {\n                return new Observable_1.Observable(function (obs) {\n                    obs.error(new AuthHttpError('No JWT present or has expired'));\n                });\n            }\n        }\n        else {\n            req.headers.set(this.config.headerName, this.config.headerPrefix + token);\n        }\n        return this.http.request(req);\n    };\n    AuthHttp.prototype.setGlobalHeaders = function (headers, request) {\n        if (!request.headers) {\n            request.headers = new http_1.Headers();\n        }\n        headers.forEach(function (header) {\n            var key = Object.keys(header)[0];\n            var headerValue = header[key];\n            request.headers.set(key, headerValue);\n        });\n    };\n    AuthHttp.prototype.request = function (url, options) {\n        var _this = this;\n        if (typeof url === 'string') {\n            return this.get(url, options); // Recursion: transform url from String to Request\n        }\n        // else if ( ! url instanceof Request ) {\n        //   throw new Error('First argument must be a url string or Request instance.');\n        // }\n        // from this point url is always an instance of Request;\n        var req = url;\n        // Create a cold observable and load the token just in time\n        return Observable_1.Observable.defer(function () {\n            var token = _this.config.tokenGetter();\n            if (token instanceof Promise) {\n                return Observable_1.Observable.fromPromise(token).mergeMap(function (jwtToken) { return _this.requestWithToken(req, jwtToken); });\n            }\n            else {\n                return _this.requestWithToken(req, token);\n            }\n        });\n    };\n    AuthHttp.prototype.get = function (url, options) {\n        return this.requestHelper({ body: '', method: http_1.RequestMethod.Get, url: url }, options);\n    };\n    AuthHttp.prototype.post = function (url, body, options) {\n        return this.requestHelper({ body: body, method: http_1.RequestMethod.Post, url: url }, options);\n    };\n    AuthHttp.prototype.put = function (url, body, options) {\n        return this.requestHelper({ body: body, method: http_1.RequestMethod.Put, url: url }, options);\n    };\n    AuthHttp.prototype.delete = function (url, options) {\n        return this.requestHelper({ body: '', method: http_1.RequestMethod.Delete, url: url }, options);\n    };\n    AuthHttp.prototype.patch = function (url, body, options) {\n        return this.requestHelper({ body: body, method: http_1.RequestMethod.Patch, url: url }, options);\n    };\n    AuthHttp.prototype.head = function (url, options) {\n        return this.requestHelper({ body: '', method: http_1.RequestMethod.Head, url: url }, options);\n    };\n    AuthHttp.prototype.options = function (url, options) {\n        return this.requestHelper({ body: '', method: http_1.RequestMethod.Options, url: url }, options);\n    };\n    return AuthHttp;\n}());\nAuthHttp = __decorate([\n    core_1.Injectable(),\n    __metadata(\"design:paramtypes\", [AuthConfig, http_1.Http, http_1.RequestOptions])\n], AuthHttp);\nexports.AuthHttp = AuthHttp;\n/**\n * Helper class to decode and find JWT expiration.\n */\nvar JwtHelper = (function () {\n    function JwtHelper() {\n    }\n    JwtHelper.prototype.urlBase64Decode = function (str) {\n        var output = str.replace(/-/g, '+').replace(/_/g, '/');\n        switch (output.length % 4) {\n            case 0: {\n                break;\n            }\n            case 2: {\n                output += '==';\n                break;\n            }\n            case 3: {\n                output += '=';\n                break;\n            }\n            default: {\n                throw 'Illegal base64url string!';\n            }\n        }\n        return this.b64DecodeUnicode(output);\n    };\n    // credits for decoder goes to https://github.com/atk\n    JwtHelper.prototype.b64decode = function (str) {\n        var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n        var output = '';\n        str = String(str).replace(/=+$/, '');\n        if (str.length % 4 == 1) {\n            throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n        }\n        for (\n        // initialize result and counters\n        var bc = 0, bs = void 0, buffer = void 0, idx = 0; \n        // get next character\n        buffer = str.charAt(idx++); \n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n            // and if not first of each 4 characters,\n            // convert the first 8 bits to one ascii character\n            bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0) {\n            // try to find character in table (0-63, not found => -1)\n            buffer = chars.indexOf(buffer);\n        }\n        return output;\n    };\n    // https://developer.mozilla.org/en/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\n    JwtHelper.prototype.b64DecodeUnicode = function (str) {\n        return decodeURIComponent(Array.prototype.map.call(this.b64decode(str), function (c) {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n    };\n    JwtHelper.prototype.decodeToken = function (token) {\n        var parts = token.split('.');\n        if (parts.length !== 3) {\n            throw new Error('JWT must have 3 parts');\n        }\n        var decoded = this.urlBase64Decode(parts[1]);\n        if (!decoded) {\n            throw new Error('Cannot decode the token');\n        }\n        return JSON.parse(decoded);\n    };\n    JwtHelper.prototype.getTokenExpirationDate = function (token) {\n        var decoded;\n        decoded = this.decodeToken(token);\n        if (!decoded.hasOwnProperty('exp')) {\n            return null;\n        }\n        var date = new Date(0); // The 0 here is the key, which sets the date to the epoch\n        date.setUTCSeconds(decoded.exp);\n        return date;\n    };\n    JwtHelper.prototype.isTokenExpired = function (token, offsetSeconds) {\n        var date = this.getTokenExpirationDate(token);\n        offsetSeconds = offsetSeconds || 0;\n        if (date == null) {\n            return false;\n        }\n        // Token expired?\n        return !(date.valueOf() > (new Date().valueOf() + (offsetSeconds * 1000)));\n    };\n    return JwtHelper;\n}());\nexports.JwtHelper = JwtHelper;\n/**\n * Checks for presence of token and that token hasn't expired.\n * For use with the @CanActivate router decorator and NgIf\n */\nfunction tokenNotExpired(tokenName, jwt) {\n    if (tokenName === void 0) { tokenName = AuthConfigConsts.DEFAULT_TOKEN_NAME; }\n    var token = jwt || localStorage.getItem(tokenName);\n    var jwtHelper = new JwtHelper();\n    return token != null && !jwtHelper.isTokenExpired(token);\n}\nexports.tokenNotExpired = tokenNotExpired;\nexports.AUTH_PROVIDERS = [\n    {\n        provide: AuthHttp,\n        deps: [http_1.Http, http_1.RequestOptions],\n        useFactory: function (http, options) {\n            return new AuthHttp(new AuthConfig(), http, options);\n        }\n    }\n];\nfunction provideAuth(config) {\n    return [\n        {\n            provide: AuthHttp,\n            deps: [http_1.Http, http_1.RequestOptions],\n            useFactory: function (http, options) {\n                return new AuthHttp(new AuthConfig(config), http, options);\n            }\n        }\n    ];\n}\nexports.provideAuth = provideAuth;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\nfunction toObject(val) {\n    if (val === null || val === undefined) {\n        throw new TypeError('Object.assign cannot be called with null or undefined');\n    }\n    return Object(val);\n}\nfunction objectAssign(target) {\n    var source = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        source[_i - 1] = arguments[_i];\n    }\n    var from;\n    var to = toObject(target);\n    var symbols;\n    for (var s = 1; s < arguments.length; s++) {\n        from = Object(arguments[s]);\n        for (var key in from) {\n            if (hasOwnProperty.call(from, key)) {\n                to[key] = from[key];\n            }\n        }\n        if (Object.getOwnPropertySymbols) {\n            symbols = Object.getOwnPropertySymbols(from);\n            for (var i = 0; i < symbols.length; i++) {\n                if (propIsEnumerable.call(from, symbols[i])) {\n                    to[symbols[i]] = from[symbols[i]];\n                }\n            }\n        }\n    }\n    return to;\n}\n/**\n * Module for angular2-jwt\n * @experimental\n */\nvar AuthModule = AuthModule_1 = (function () {\n    function AuthModule(parentModule) {\n        if (parentModule) {\n            throw new Error('AuthModule is already loaded. Import it in the AppModule only');\n        }\n    }\n    AuthModule.forRoot = function (config) {\n        return {\n            ngModule: AuthModule_1,\n            providers: [\n                { provide: AuthConfig, useValue: config }\n            ]\n        };\n    };\n    return AuthModule;\n}());\nAuthModule = AuthModule_1 = __decorate([\n    core_1.NgModule({\n        imports: [http_1.HttpModule],\n        providers: [AuthHttp, JwtHelper]\n    }),\n    __param(0, core_1.Optional()), __param(0, core_1.SkipSelf()),\n    __metadata(\"design:paramtypes\", [AuthModule])\n], AuthModule);\nexports.AuthModule = AuthModule;\nvar AuthModule_1;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}